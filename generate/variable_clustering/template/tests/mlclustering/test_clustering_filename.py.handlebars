import matplotlib

from labskit import Settings

from src.data_loading import sources_{{fileName}}
from src.analysis import model_{{fileName}}
from src.reporting import visualizations_{{fileName}}
from src.data_processing import transforms_{{fileName}}


def test_regression_example():
    project = Settings()
    sample_clustering_dataset = sources_{{fileName}}\
        .HmdaNdSmall(project)\
        .data\
        .pipe(transforms_{{fileName}}.define_problem)\
        .pipe(transforms_{{fileName}}.clean_clustering_data)

    predicted_dataset = model_{{fileName}}\
        .train_predict_clustering_model(
            sample_clustering_dataset,
            'originated')

    fig = visualizations_{{fileName}}\
        .plot_pca_top_two(predicted_dataset, 'originated_prediction')

    assert isinstance(fig, matplotlib.figure.Figure)
